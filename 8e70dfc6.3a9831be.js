(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{116:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return p}));var r=n(0),a=n.n(r);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=a.a.createContext({}),u=function(e){var t=a.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},m=function(e){var t=u(e.components);return a.a.createElement(c.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,o=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=u(n),d=r,p=m["".concat(o,".").concat(d)]||m[d]||b[d]||s;return n?a.a.createElement(p,i(i({ref:t},c),{},{components:n})):a.a.createElement(p,i({ref:t},c))}));function p(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,o=new Array(s);o[0]=d;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var c=2;c<s;c++)o[c]=n[c];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},117:function(e,t,n){"use strict";function r(e){var t,n,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(a&&(a+=" "),a+=n);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}t.a=function(){for(var e,t,n=0,a="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(a&&(a+=" "),a+=t);return a}},119:function(e,t,n){"use strict";var r=n(0),a=n.n(r),s=n(121),o=n(117),i=n(56),l=n.n(i),c=37,u=39;t.a=function(e){var t=e.lazy,n=e.block,i=e.defaultValue,m=e.values,b=e.groupId,d=e.className,p=Object(s.a)(),g=p.tabGroupChoices,f=p.setTabGroupChoices,v=Object(r.useState)(i),h=v[0],y=v[1],O=r.Children.toArray(e.children);if(null!=b){var j=g[b];null!=j&&j!==h&&m.some((function(e){return e.value===j}))&&y(j)}var N=function(e){y(e),null!=b&&f(b,e)},w=[];return a.a.createElement("div",null,a.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(o.a)("tabs",{"tabs--block":n},d)},m.map((function(e){var t=e.value,n=e.label;return a.a.createElement("li",{role:"tab",tabIndex:0,"aria-selected":h===t,className:Object(o.a)("tabs__item",l.a.tabItem,{"tabs__item--active":h===t}),key:t,ref:function(e){return w.push(e)},onKeyDown:function(e){!function(e,t,n){switch(n.keyCode){case u:!function(e,t){var n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()}(e,t);break;case c:!function(e,t){var n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()}(e,t)}}(w,e.target,e)},onFocus:function(){return N(t)},onClick:function(){N(t)}},n)}))),t?Object(r.cloneElement)(O.filter((function(e){return e.props.value===h}))[0],{className:"margin-vert--md"}):a.a.createElement("div",{className:"margin-vert--md"},O.map((function(e,t){return Object(r.cloneElement)(e,{key:t,hidden:e.props.value!==h})}))))}},120:function(e,t,n){"use strict";var r=n(3),a=n(0),s=n.n(a);t.a=function(e){var t=e.children,n=e.hidden,a=e.className;return s.a.createElement("div",Object(r.a)({role:"tabpanel"},{hidden:n,className:a}),t)}},121:function(e,t,n){"use strict";var r=n(0),a=n(123);t.a=function(){var e=Object(r.useContext)(a.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},123:function(e,t,n){"use strict";var r=n(0),a=Object(r.createContext)(void 0);t.a=a},124:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c}));var r=n(0),a=n.n(r),s=n(119),o=n(120),i="ts",l="code",c=[{label:"roblox-ts",value:"ts"},{label:"luau",value:"luau"}];t.d=function(e){var t=e.children,n=t[0],r=t[1];return console.log(n,r),a.a.createElement(s.a,{defaultValue:i,groupId:l,values:c},a.a.createElement(o.a,{value:"ts"},n),a.a.createElement(o.a,{value:"luau"},r))}},94:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return u})),n.d(t,"toc",(function(){return m})),n.d(t,"default",(function(){return d}));var r=n(3),a=n(7),s=(n(0),n(116)),o=n(124),i=n(119),l=n(120),c={id:"definitions",title:"Leveraging the Definitions API",sidebar_label:"Definitions Overview",slug:"/definitions"},u={unversionedId:"guides/definitions",id:"guides/definitions",isDocsHomePage:!1,title:"Leveraging the Definitions API",description:"The Definitions API is still very experimental, and subject to change.",source:"@site/docs/guides/definitions.md",slug:"/definitions",permalink:"/rbx-net/docs/2.0/definitions",editUrl:"https://github.com/roblox-aurora/rbx-net/edit/main/docs/docs/guides/definitions.md",version:"current",sidebar_label:"Definitions Overview",sidebar:"docs",previous:{title:"Basics",permalink:"/rbx-net/docs/2.0/basic-usage"},next:{title:"Using Compile Time Remote IDs",permalink:"/rbx-net/docs/2.0/uuid"}},m=[{value:"The standard way",id:"the-standard-way",children:[]},{value:"Definitions, oh my!",id:"definitions-oh-my",children:[]}],b={toc:m};function d(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(s.b)("wrapper",Object(r.a)({},b,n,{components:t,mdxType:"MDXLayout"}),Object(s.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(s.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(s.b)("h5",{parentName:"div"},Object(s.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(s.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(s.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(s.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(s.b)("p",{parentName:"div"},"The ",Object(s.b)("inlineCode",{parentName:"p"},"Definitions")," API is still very experimental, and subject to change."))),Object(s.b)("p",null,"When designing your networking objects, it may become cumbersome to keep references to all your remotes all over the place."),Object(s.b)("h2",{id:"the-standard-way"},"The standard way"),Object(s.b)("p",null,"You may define a remote on the server, as such:"),Object(s.b)(o.d,{mdxType:"Code"},Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-ts",metastring:'title="server/test.server.ts"',title:'"server/test.server.ts"'}),'import Net from "@rbxts/net";\nconst PrintMessage = new Net.Server.Event<[message: string]>("PrintMessage");\nconst MakeHello = new Net.Server.AsyncFunction<[input: string], []>("MakeHello");\n\nPrintMessage.Connect((message) => {\n    print(message);\n});\nMakeHello.SetCallback((message) => `Hello, ${message}!`);\n')),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-lua",metastring:'title="server/test.server.lua"',title:'"server/test.server.lua"'}),'local Net = require(ReplicatedStorage.Net)\nlocal PrintMessage = Net.Server.Event.new("PrintMessage");\nlocal MakeHello = Net.Server.AsyncFunction.new("MakeHello");\n\nPrintMessage:Connect(function(message)\n    print(message)\nend)\nMakeHello:SetCallback(function(message)\n  return "Hello, " .. message .. "!")\nend)\n'))),Object(s.b)("p",null,"And then of course, a parallel client remote on the client."),Object(s.b)(o.d,{mdxType:"Code"},Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-ts",metastring:'title="client/test.client.ts"',title:'"client/test.client.ts"'}),'import Net from "@rbxts/net";\nconst PrintMessage = new Net.Client.Event<[], [message: string]>("PrintMessage");\nconst MakeHello = new Net.Client.AsyncFunction<[], [message: string], string>("MakeHello");\n\nPrintMessage.SendToServer("Hello there!");\nMakeHello.CallServerAsync("Roblox").then(result => {\n    print(result); // Should be Hello, Roblox!\n});\n')),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-lua",metastring:'title="client/test.client.ts"',title:'"client/test.client.ts"'}),'local Net = require(ReplicatedStorage.Net)\nlocal PrintMessage = Net.Client.Event.new("PrintMessage")\nlocal MakeHello = Net.Client.AsyncFunction.new("MakeHello")\n\nPrintMessage:SendToServer("Hello there!")\nMakeHello:CallServerAsync("Roblox"):andThen(function(result)\n    print(result) --  Should be Hello, Roblox!\nend)\n'))),Object(s.b)("p",null,"While this works very well, you may want a single place to reference ",Object(s.b)("em",{parentName:"p"},"all")," your remote objects and handle all the types for you. As you can see above, maintaining types could get very hectic. This is where ",Object(s.b)("inlineCode",{parentName:"p"},"Definitions")," come in."),Object(s.b)("h2",{id:"definitions-oh-my"},"Definitions, oh my!"),Object(s.b)("p",null,"One of the new cool features of v2.0 is the ",Object(s.b)("a",Object(r.a)({parentName:"p"},{href:"api/definitions"}),"Net.Definitions")," namespace. Now we can define our remotes in a single place, rather than having to maintain separate references:"),Object(s.b)(i.a,{defaultValue:o.a,groupId:o.b,values:o.c,mdxType:"Tabs"},Object(s.b)(l.a,{value:"ts",mdxType:"TabItem"},Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-ts",metastring:'title="shared/remotes.ts"',title:'"shared/remotes.ts"'}),'import Net from "@rbxts/net";\n\nconst Remotes = Net.Definitions.Create({\n  PrintMessage: Net.Definitions.Event<[message: string, other: string]>(),\n  MakeHello: Net.Definitions.AsyncFunction<(message: string) => string>(),\n});\n\nexport { Remotes };\n')),Object(s.b)("p",null,"And how do we use these in the client and server?"),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-ts",metastring:'title="server/test.server.ts"',title:'"server/test.server.ts"'}),'import { Remotes } from "shared/remotes";\n\n// listen to messages\nconst PrintMessage = Remotes.Server.Create("PrintMessage");\nPrintMessage.Connect((player, message, other) => {\n  print(`Server recieved message: ${message} from player: ${player} ${other}`);\n});\n\n// listen and respond to messages\nconst MakeHello = Remotes.Server.Create("MakeHello");\nMakeHello.SetCallback((player, message) => {\n  print(`Server got an async message from ${player} containing the message ${message}`);\n  return `Hello, ${player}! We got your message: ${message}`;\n});\n')),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-ts",metastring:'title="client/test.client.ts"',title:'"client/test.client.ts"'}),'import { Remotes } from "shared/remotes";\n\n// send a message to the server\nconst PrintMessage = Remotes.Client.Get("PrintMessage");\nPrintMessage.SendToServer("Hello there!", "other");\n\n// send a message to the server, while listening for a response\nconst MakeHello = Remotes.Client.Get("MakeHello");\nMakeHello.CallServerAsync("Net is cool right??").then((result) => {\n  print(`Client got a response to the async message from server: ${result}`);\n});\n'))),Object(s.b)(l.a,{value:"luau",mdxType:"TabItem"},Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-lua",metastring:'title="src/shared/remotes.lua"',title:'"src/shared/remotes.lua"'}),"local Net = require(ReplicatedStorage.Net)\n\nlocal Remotes = Net.Definitions.Create({\n  PrintMessage = Net.Definitions.Event(),\n  MakeHello = Net.Definitions.AsyncFunction(),\n})\n\nreturn Remotes\n")),Object(s.b)("p",null,"And how do we use these in the client and server?"),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-lua",metastring:'title="src/server/test.server.lua"',title:'"src/server/test.server.lua"'}),'local Remotes = require(ReplicatedStorage.Common.Remotes)\n\n-- listen to messages\nlocal PrintMessage = Remotes.Server:Create("PrintMessage")\nPrintMessage:Connect(function (player, message, other)\n  print("Server recieved message: ", message, "from player:" ,player, other)\nend)\n\n-- listen and respond to messages\nlocal MakeHello = Remotes.Server:Create("MakeHello")\nMakeHello:SetCallback(function(player, message)\n  print("Server got an async message from ", player, " containing the message ", message)\n  return "Hello, " .. tostring(player) .. "! We got your message: " .. message\nend)\n')),Object(s.b)("pre",null,Object(s.b)("code",Object(r.a)({parentName:"pre"},{className:"language-lua",metastring:'title="client/test.client.lua"',title:'"client/test.client.lua"'}),'local Remotes = require(ReplicatedStorage.Common.Remotes)\n\n-- send a message to the server\nlocal PrintMessage = Remotes.Client:Get("PrintMessage");\nPrintMessage:SendToServer("Hello there!", "other");\n\n-- send a message to the server, while listening for a response\nlocal MakeHello = Remotes.Client:Get("MakeHello")\nMakeHello:CallServerAsync("Net is cool right??"):andThen(function(result)\n  print("Client got a response to the async message from server", result)\nend)\n')))),Object(s.b)("p",null,"Simple! note the lack of needing type information outside of the definitions file. If you want to use your definitions in multiple places, you don't have to worry about your types being out of sync!"))}d.isMDXComponent=!0}}]);